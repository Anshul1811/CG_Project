<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birds Flying Animation in WebGL</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: skyblue;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            background-color: skyblue;
        }
    </style>
</head>

<body>
    <canvas id="glCanvas"></canvas>
    <script>
        window.onload = function() {
            // Get the WebGL context
            var canvas = document.getElementById('glCanvas');
            var gl = canvas.getContext('webgl');

            // Check if WebGL is available
            if (!gl) {
                alert('Unable to initialize WebGL. Your browser may not support it.');
                return;
            }

            // Vertex shader program
            var vsSource = `
                attribute vec2 a_position;

                void main() {
                    gl_Position = vec4(a_position, 0.0, 1.0);
                }
            `;

            // Fragment shader program
            var fsRectSource = `
            precision mediump float;

            void main() {
                gl_FragColor = vec4(0.529, 0.808, 0.922, 1.0); // Sky blue color
            }
        `;
            var fsBirdsSource = `
        precision mediump float;

        void main() {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0); // Black color for the birds
        }
    `;

            // Compile shader program
            var vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
            var fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsRectSource);
            var program = createProgram(gl, vertexShader, fragmentShader);
            gl.useProgram(program);

            // Set up the position attribute for the rectangle
            var positionAttributeLocation = gl.getAttribLocation(program, "a_position");
            var positionBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
            var positions = [-1.0, -1.0,
                1.0, -1.0, -1.0, 1.0,
                1.0, 1.0,
            ];
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);
            gl.enableVertexAttribArray(positionAttributeLocation);
            gl.vertexAttribPointer(positionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

            // Set up the position attribute for the birds
            var birdPositionAttributeLocation = gl.getAttribLocation(program, "a_position");
            var birdPositionBuffer = gl.createBuffer();

            var numBirds = 10; // Number of birds in each group
            var birdX1 = new Array(numBirds);
            var birdX2 = new Array(numBirds);
            var birdY = new Array(numBirds);
            var birdSpeed1 = 0.002; // Speed of birds in group 1
            var birdSpeed2 = 0.003; // Speed of birds in group 2

            // Initialize bird positions for group 1
            for (var i = 0; i < numBirds; i++) {
                birdX1[i] = -1.0 + (i * 0.2); // Equally spaced horizontally
                birdY[i] = Math.random() * 2.0 - 1.0; // Random vertical positions
            }

            // Initialize bird positions for group 2
            for (var i = 0; i < numBirds; i++) {
                birdX2[i] = -1.0 + (i * 0.2); // Equally spaced horizontally
            }

            // Draw function
            function draw() {
                // Clear the canvas
                gl.clearColor(0.0, 0.0, 0.0, 1.0);
                gl.clear(gl.COLOR_BUFFER_BIT);

                // Draw rectangle
                gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

                // Draw birds for group 1
                var birdPositions1 = [];
                for (var i = 0; i < numBirds; i++) {
                    birdPositions1.push(
                        // Body
                        birdX1[i] - 0.02, birdY[i],
                        birdX1[i] + 0.02, birdY[i],
                        birdX1[i], birdY[i] + 0.04,

                        // Head
                        birdX1[i] + 0.02, birdY[i],
                        birdX1[i] + 0.04, birdY[i] + 0.02,
                        birdX1[i] + 0.02, birdY[i] + 0.04,

                        // Left wing
                        birdX1[i] - 0.02, birdY[i],
                        birdX1[i] - 0.06, birdY[i] - 0.04,
                        birdX1[i] - 0.06, birdY[i],

                        // Right wing
                        birdX1[i] + 0.02, birdY[i],
                        birdX1[i] + 0.06, birdY[i] - 0.04,
                        birdX1[i] + 0.06, birdY[i],

                        // Beak
                        birdX1[i] + 0.03, birdY[i] + 0.02,
                        birdX1[i] + 0.05, birdY[i] + 0.02,
                        birdX1[i] + 0.05, birdY[i]
                    );

                    // Update bird position for next frame
                    birdX1[i] += birdSpeed1; // Move bird to the right
                    if (birdX1[i] > 1.2) { // If bird moves off the screen, reset its position
                        birdX1[i] = -1.2;
                        birdY[i] = Math.random() * 2.0 - 1.0; // Random vertical position
                    }
                }

                // Draw birds for group 2
                var birdPositions2 = [];
                for (var i = 0; i < numBirds; i++) {
                    birdPositions2.push(
                        // Body
                        birdX2[i] - 0.02, birdY[i],
                        birdX2[i] + 0.02, birdY[i],
                        birdX2[i], birdY[i] + 0.04,

                        // Head
                        birdX2[i] + 0.02, birdY[i],
                        birdX2[i] + 0.04, birdY[i] + 0.02,
                        birdX2[i] + 0.02, birdY[i] + 0.04,

                        // Left wing
                        birdX2[i] - 0.02, birdY[i],
                        birdX2[i] - 0.06, birdY[i] - 0.04,
                        birdX2[i] - 0.06, birdY[i],

                        // Right wing
                        birdX2[i] + 0.02, birdY[i],
                        birdX2[i] + 0.06, birdY[i] - 0.04,
                        birdX2[i] + 0.06, birdY[i],

                        // Beak
                        birdX2[i] + 0.03, birdY[i] + 0.02,
                        birdX2[i] + 0.05, birdY[i] + 0.02,
                        birdX2[i] + 0.05, birdY[i]
                    );

                    // Update bird position for next frame
                    birdX2[i] += birdSpeed2; // Move bird to the right
                    if (birdX2[i] > 1.2) { // If bird moves off the screen, reset its position
                        birdX2[i] = -1.2;
                    }
                }

                // Combine bird positions for both groups
                var birdPositions = birdPositions1.concat(birdPositions2);

                gl.bindBuffer(gl.ARRAY_BUFFER, birdPositionBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(birdPositions), gl.STATIC_DRAW);
                gl.enableVertexAttribArray(birdPositionAttributeLocation);
                gl.vertexAttribPointer(birdPositionAttributeLocation, 2, gl.FLOAT, false, 0, 0);

                gl.drawArrays(gl.TRIANGLES, 0, birdPositions.length / 2);

                requestAnimationFrame(draw);
            }

            // Start animation
            draw();
        };

        // Create shader
        function createShader(gl, type, source) {
            var shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);

            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                console.error('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));
                gl.deleteShader(shader);
                return null;
            }

            return shader;
        }

        // Create program
        function createProgram(gl, vertexShader, fragmentShader) {
            var program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);

            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                console.error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(program));
                return null;
            }

            return program;
        }
    </script>
</body>

</html>